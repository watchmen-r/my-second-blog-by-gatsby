{"componentChunkName":"component---src-pages-blog-post-tsx","path":"/008_webrtc-basic-knowledge/","result":{"data":{"site":{"siteMetadata":{"title":"Oda's web memo"}},"markdownRemark":{"id":"135463c9-015a-5e67-a009-2541d66692b3","excerpt":"Now I am studying the WebRTC to incorporate it to my shooter game. But looks like there are a lot of problems to introduce to game without any paid. So to…","html":"<p>Now I am studying the WebRTC to incorporate it to my shooter game. But looks like there are a lot of problems to introduce to game without any paid. So to remember it, I want to summarize the knowledge of it.</p>\n<h1>Overview</h1>\n<p>This is a overview image of WebRTC.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/my-second-blog-by-gatsby/static/76f7cae4b3a04e281904838ce409f8ed/49217/webrtc-summary.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 105.69620253164558%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsTAAALEwEAmpwYAAACnUlEQVR42p1U21LaUBTlI/tB/kJn+tiLl4ISQgKI2NtLnbFOa9ECgSTkKoRcgCQQ1Nq+rM7ZUWopKC0zawbOWbPYa6+9TyYvjyF0IxQfRPjgPa9GKBsTPD8bIMMO9o0JKisRo2wlKJvTlZyyPkHNTrDZ8FJBOlyKGPtWgmefZshL7PtyXkmf4MBO8OohQUaqmjGy6nc82VCxeeyi1k9Q0uP/E2SoWlNs1x1sZD+jIHnYt5P1Kry7uBOumFOI3RC8HICTHPDtHjjJRVEZpVzzT/6CYJgKGFMI+gSCFpMQA7PHelixZsQR1DEKHR+CFkI0U37JSPFbUIshdgIcyj6O+jOU2/cqWdqvGHtnF8T/2E9Q0yOIekwpp4LGFGLdhNa18eP6BnU7xK7kg5d9qibfGhDIshwg3wkg1g1oqo2f1zc4tcfg1AiHd4K8FqGijiB80ZE/UlFsOBC6Y7JY0iLkzi+wc2qAkzw6Y/bFjgeR+AqKLS+1bM0tRySQbTjguxH2Wi4KbW9ut2KyoU7mAbCwuLYPTh5it+Ui13DofCGUNFl2wfrHms9Coe3QI1S1cSqmhfRnohbRPVXMnOjxijlkyXVDEhSUEVXRcce4urrEG9XDbtsnLk2AFs6De3SweXlIxFxzgF40A/t8UF1qSYk9BvJw7miNTUmHuqgMqXfvlQGOFRtlxScHLHm24/+8etRDY4K8PMLWuZM+cbf9vV/deoK3q8fJI3zthXDjGQ7UdAYXxdaukJ3lmu68h+8UBwU1fFyQV8PbpP4GW8sTw4PpBjjoDiHqk6U8UYvpZXr5zUWGqdeshCZ9ETV7Bq7lIntmo6xF9HsZr2pO8bZ3iZ1WgMyL8wG2mx62VmBHGuJ1e4Stpr+Sw57+rBTg6YmFX2QOrh0HLH8YAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Alt Text\"\n        title=\"summary image\"\n        src=\"/my-second-blog-by-gatsby/static/76f7cae4b3a04e281904838ce409f8ed/f058b/webrtc-summary.png\"\n        srcset=\"/my-second-blog-by-gatsby/static/76f7cae4b3a04e281904838ce409f8ed/c26ae/webrtc-summary.png 158w,\n/my-second-blog-by-gatsby/static/76f7cae4b3a04e281904838ce409f8ed/6bdcf/webrtc-summary.png 315w,\n/my-second-blog-by-gatsby/static/76f7cae4b3a04e281904838ce409f8ed/f058b/webrtc-summary.png 630w,\n/my-second-blog-by-gatsby/static/76f7cae4b3a04e281904838ce409f8ed/49217/webrtc-summary.png 701w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>Signaling server</h3>\n<p>To exchange the information of connect, client uses the signaling server and exchange the connection info.</p>\n<h3>STUN server</h3>\n<p>This teaches the client's IP address from the perspective of external network.</p>\n<h3>TURN server</h3>\n<p>Actually, if we want to apply the pure P2P connection. This would not be needed. But sometimes this turn server would be needed when the client uses the firewall and so on. Maintaining this server would be so expensive since this passes the request each other anytime.</p>\n<h1>How to implement it.</h1>\n<p>There are many libraries for JavaScript. And PeerJS is one of the most popular one.</p>\n<p><a href=\"https://github.com/peers/peerjs\">PeerJS</a></p>\n<p>Surprisingly, this library provides us the free signaling server.\n<a href=\"https://peerjs.com/peerserver\">PeerJS PeerServer</a></p>\n<p>We also can build own signaling server using PeerServer library.\n<a href=\"https://github.com/peers/peerjs-server\">PeerJS-server</a></p>\n<p>I think we can use STUN server freely since there are so many services in the internet. But as for TURN server, it would be very difficult since this server passes the correspond each other via itself and prices of networking would be so high. (And this situation is very tough for me since I want to develop my services as much as freely...)</p>\n<p>As for TURN server, there are also many libraries to build it. Coturn is one of the famous one.<br>\n<a href=\"https://github.com/coturn/coturn\">coturn</a></p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UTF-8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>icon<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>image/svg+xml<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/favicon-32x32.png<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>viewport<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>width=device-width, initial-scale=1.0<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Page title<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>So if we want to add animation, we have to change this title tag using JavaScript.</p>\n<h1>Code</h1>\n<p>As for my portfolio page, my animation code is like this.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> titles <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"⭐️\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"W\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"e\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"l\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"c\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"o\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"m\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"e\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"‼️\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"⭐️\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> titleIndex <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> cur <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  cur <span class=\"token operator\">=</span> titleIndex <span class=\"token operator\">==</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token string\">\"\"</span> <span class=\"token operator\">:</span> cur <span class=\"token operator\">+</span> titles<span class=\"token punctuation\">[</span>titleIndex <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> cur <span class=\"token operator\">+</span> <span class=\"token string\">\"✈︎\"</span><span class=\"token punctuation\">;</span>\n  titleIndex <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>titleIndex <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>titles<span class=\"token punctuation\">.</span>length <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>In this code, I changed the title each 500ms. Finally, I could add animation like this.</p>\n<p><img src=\"./beginning.png\" alt=\"Alt Text\" title=\"beginning image\"></p>\n<p><img src=\"./ending.png\" alt=\"Alt Text\" title=\"ending image\"></p>","frontmatter":{"title":"WebRTC summary","date":"November 27, 2024","description":"Now I am studying the WebRTC to incorporate it to my shooter game. But looks like there are a lot of problems to introduce to game without any paid. So to remember it, I want to summarize the knowledge of it."}},"previous":{"fields":{"slug":"/007_browser-tab-animation/"},"frontmatter":{"title":"Browser tab animation"}},"next":null},"pageContext":{"id":"135463c9-015a-5e67-a009-2541d66692b3","previousPostId":"db08f7f2-514a-5844-840f-ffcb0a8e64d7","nextPostId":null}},"staticQueryHashes":["2841359383"],"slicesMap":{}}